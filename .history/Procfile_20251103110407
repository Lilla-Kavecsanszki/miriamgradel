# Procfile
web: gunicorn miriamgradel.wsgi:application \
  --workers=${WEB_CONCURRENCY:-2} \
  --threads=${GUNICORN_THREADS:-1} \
  --timeout=${GUNICORN_TIMEOUT:-30} \
  --keep-alive=5 \
  --max-requests=1000 --max-requests-jitter=100 \
  --worker-tmp-dir=/dev/shm \
  --preload \
  --log-level=${LOG_LEVEL:-info} \
  --access-logfile - --error-logfile -

# Run migrations & collectstatic on each deploy
release: python manage.py migrate && python manage.py collectstatic --noinput
