{% extends "base.html" %}
{% load static wagtailcore_tags wagtailembeds_tags %}

{% block body_class %}template-video{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/journalism.css' %}">
{% endblock extra_css %}

{% block content %}
<section class="container my-5">

  <header class="mast mb-4">
    <h1 class="mast__title">As a multimedia Journalist I also do Videos</h1>
    {% if page.intro %}
      <p class="mast__dek">{{ page.intro|richtext }}</p>
    {% endif %}
  </header>

  {% if featured %}
  <section class="featured mb-5">
    <div class="section-hd"><span>My Last video in {{ current_year }}</span></div>

    <div class="featured__grid">
      <div class="featured__media">
        <a class="featured__link" href="{{ featured.url }}" aria-label="Open {{ featured.title }}">
          <div class="embed">{% embed featured.embed_url %}</div>
        </a>
      </div>

      <aside class="featured__meta">
        <p class="meta__date">{{ featured.video_date|default:featured.first_published_at|date:"d/m/Y" }}</p>
        <h2 class="meta__title"><a href="{{ featured.url }}">{{ featured.title }}</a></h2>

        {% if featured.description %}
          <div class="meta__body richtext">{{ featured.description|richtext }}</div>
        {% endif %}

        <div class="meta__credits">
          {% if featured.produced_by %}
            Produced by <strong>{{ featured.produced_by }}</strong>{% if featured.produced_for %} for: <strong>{{ featured.produced_for }}</strong>{% endif %}
          {% elif featured.produced_for %}
            Produced for: <strong>{{ featured.produced_for }}</strong>
          {% endif %}
        </div>

        <div class="meta__share">
          <span>Share it</span>
          {% with u=featured.full_url|urlencode t=featured.title|urlencode %}
            <a aria-label="Share to X" href="https://twitter.com/intent/tweet?url={{ u }}&text={{ t }}" target="_blank" rel="noopener">X</a>
            <a aria-label="Share to Facebook" href="https://www.facebook.com/sharer/sharer.php?u={{ u }}" target="_blank" rel="noopener">FB</a>
            <a aria-label="Share to LinkedIn" href="https://www.linkedin.com/sharing/share-offsite/?url={{ u }}" target="_blank" rel="noopener">IN</a>
          {% endwith %}
        </div>

        <a class="btn" href="{{ featured.url }}">Open video page</a>
      </aside>
    </div>
  </section>
  {% endif %}

  <section class="all-videos">
    <div class="section-hd"><span>All my videos</span></div>

    <div class="cards">
      {% for v in videos %}
        <article class="card">
          <a class="card__media" href="{{ v.url }}" aria-label="Open {{ v.title }}">
            <div class="embed embed--thumb">{% embed v.embed_url %}</div>
          </a>
          <div class="card__body">
            <h3 class="card__title"><a href="{{ v.url }}">{{ v.title }}</a></h3>
            {% if v.standfirst %}<p class="card__dek">{{ v.standfirst }}</p>{% endif %}
          </div>
        </article>
      {% empty %}
        <p>No videos yet.</p>
      {% endfor %}
    </div>
  </section>

</section>
{% endblock %}
