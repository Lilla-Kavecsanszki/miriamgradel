{% extends "base.html" %}
{% load static wagtailcore_tags wagtailimages_tags i18n %}

{% block body_class %}template-bts-onepage{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/journalism.css' %}">
  <link rel="stylesheet" href="{% static 'css/bts.css' %}">
{% endblock extra_css %}

{% block content %}
<div class="container-fluid py-4">
  <div class="row">
    <div class="col-12">

      <!-- Hero ribbon -->
      <div class="written-hero mb-3">
        <span class="cap" aria-hidden="true"></span>
        <h1 class="block-title m-0" style="color:#73f0fa">
          {{ page.intro_heading|default:page.title }}
        </h1>
      </div>

      {% if page.intro_body %}
        <div class="lead mb-4" style="max-width:65ch">
          {{ page.intro_body|richtext }}
        </div>
      {% endif %}

      {# Prefer queryset from get_context; fallback to live children #}
      {% if all_teasers %}
        {% include "behind_scenes/bts/_teaser_group.html" with items=all_teasers only %}
      {% else %}
        {% with items=page.get_children.live.specific %}
          {% if items %}
            <!-- Fallback used: {{ items|length }} items -->
            {% include "behind_scenes/bts/_teaser_group.html" with items=items only %}
          {% else %}
            <p class="text-muted mb-0">{% trans "No BTS items yet." %}</p>
          {% endif %}
        {% endwith %}
      {% endif %}

    </div>
  </div>
</div>
{% endblock %}
