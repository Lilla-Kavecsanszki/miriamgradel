{% extends "base.html" %}
{% load static wagtailcore_tags wagtailimages_tags i18n %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/journalism.css' %}">
  <link rel="stylesheet" href="{% static 'css/bts.css' %}">
  <link rel="stylesheet" href="{% static 'css/bts_detail.css' %}">
{% endblock extra_css %}

{% block content %}
<div class="container-fluid bts-detail">
  <article class="bts-article">

    {# Page header ribbon (shows the category) #}
    <div class="written-hero mb-3">
      <span class="cap" aria-hidden="true"></span>
      <div class="block-title" style="color:#73f0fa">
        {{ page.get_category_display }}
      </div>
    </div>

    {# Title & intro #}
    <header class="mb-4 bts-intro">
      <h1 class="mb-2">{{ page.intro_title|default:page.title }}</h1>
      {% if page.intro_body %}
        <div class="lead" style="max-width: 70ch;">
          {{ page.intro_body|richtext }}
        </div>
      {% endif %}
    </header>

    {# Optional teaser image (responsive, fast) #}
    {% if page.teaser_image %}
      {% with alt_text=page.intro_title|default:page.title %}
      <figure class="mb-4">
        {% image page.teaser_image fill-1200x675
            loading="lazy"
            class="img-fluid rounded w-100"
            srcset="fill-600x338 600w, fill-900x506 900w, fill-1200x675 1200w, fill-1600x900 1600w"
            sizes="(min-width:1200px) 1100px, (min-width:992px) 900px, 100vw"
            alt="{{ alt_text }}" %}
      </figure>
      {% endwith %}
    {% endif %}

    {# Main body #}
    {% if page.body %}
      <div class="article-body">
        {% for block in page.body %}
          <div class="mb-lg-2">
            {% include_block block %}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    </article>

    {# Back link #}
    <div class="back-affix mt-3">
      <a href="{{ page.get_parent.url }}" class="btn btn-brand">
        ‚Üê {% trans "Back to Behind the Scenes" %}
      </a>
    </div>
  
</div>
{% endblock content %}
